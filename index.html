<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ØªØ·Ø¨ÙŠÙ‚ Ø±Ø¹Ø¯</title>
  <link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet" />
  <style>
    :root {
      --gold: #d4af37;
      --bg: #000;
      --card-bg: #1a1a1a;
      --text: #f5f5f5;
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: 'Amiri', serif;
      overflow-x: hidden;
    }

    /* Ù‡ÙŠØ¯Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ */
    header {
      text-align: center;
      color: var(--gold);
      font-size: 28px;
      padding: 20px;
      background: #111;
      border-bottom: 2px solid var(--gold);
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    }

    /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
    nav {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
      padding: 15px;
      background: #0a0a0a;
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    button {
      background: var(--gold);
      border: none;
      border-radius: 12px;
      padding: 10px 18px;
      font-weight: bold;
      cursor: pointer;
      font-size: 16px;
      color: #000;
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    button:hover {
      transform: scale(1.05);
      background: #fff;
    }

    button:active {
      transform: scale(0.9);
    }

    /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙˆØ§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† */
    section {
      display: none;
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
      animation: slideUp 0.6s ease-out forwards;
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .active { display: block; }

    /* Ø§Ù„ÙƒØ±ÙˆØª */
    .card {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 20px;
      margin: 15px 0;
      border: 1px solid #333;
      transition: 0.3s;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    .card:hover {
      border-color: var(--gold);
      transform: translateY(-5px);
    }

    .ayah { line-height: 2.5; font-size: 22px; text-align: center; }
    
    /* Ø§Ù„Ù…Ø³Ø¨Ø­Ø© */
    .counter-container {
      text-align: center;
      padding: 40px 0;
    }

    .counter {
      font-size: 85px;
      color: var(--gold);
      margin-bottom: 20px;
      transition: 0.1s;
      text-shadow: 0 0 20px rgba(212, 175, 55, 0.4);
    }

    .bump { transform: scale(1.3); color: #fff; }

    .tasbeeh-btn {
      width: 180px;
      height: 180px;
      border-radius: 50%;
      font-size: 28px;
      border: 5px solid var(--gold);
      background: transparent;
      color: var(--gold);
    }

    .tasbeeh-btn:active { background: var(--gold); color: #000; }

    /* Ø§Ù„ØªÙØ³ÙŠØ± */
    .tafsir {
      background: #222;
      border-right: 4px solid var(--gold);
      padding: 15px;
      margin-top: 10px;
      font-size: 17px;
      display: none;
      border-radius: 0 8px 8px 0;
    }

    /* Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© */
    .prayer-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 10px;
      margin-top: 20px;
    }

    .prayer-item {
      background: #111;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      border-bottom: 3px solid var(--gold);
    }

    input[type="text"] {
      background: #222;
      color: #fff;
      border: 1px solid var(--gold);
      border-radius: 10px;
      padding: 12px;
      width: 100%;
      max-width: 300px;
      margin-bottom: 10px;
      text-align: center;
      font-family: inherit;
    }

    @media (max-width: 600px) {
      button { padding: 8px 12px; font-size: 14px; }
      header { font-size: 22px; }
    }
  </style>
</head>

<body>

  <header>ğŸŒ¿ ØªØ·Ø¨ÙŠÙ‚ Ø±Ø¹Ø¯ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ</header>

  <nav id="mainNav">
    <button onclick="playBtn(); openTab('quran')">ğŸ“– Ø§Ù„Ù…ØµØ­Ù</button>
    <button onclick="playBtn(); openTab('tasbeeh')">ğŸ“¿ Ø§Ù„Ù…Ø³Ø¨Ø­Ø©</button>
    <button onclick="playBtn(); openTab('dhikr')">âœ¨ Ø§Ù„Ø£Ø°ÙƒØ§Ø±</button>
    <button onclick="playBtn(); openTab('prayer')">ğŸ•Œ Ø§Ù„ØµÙ„Ø§Ø©</button>
    <button onclick="playBtn(); openTab('hadith')">ğŸ“œ Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«</button>
  </nav>

  <section id="quran" class="active">
    <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
      <button onclick="prevSurah()">â¬…ï¸ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</button>
      <button onclick="nextSurah()">Ø§Ù„ØªØ§Ù„ÙŠØ© â¡ï¸</button>
    </div>
    <div id="surahList" style="display: flex; overflow-x: auto; gap: 10px; padding-bottom: 10px; margin-bottom: 20px;"></div>
    <div id="ayahs"></div>
  </section>

  <section id="tasbeeh">
    <div class="card counter-container">
      <div class="counter" id="count">0</div>
      <button class="tasbeeh-btn" onclick="inc()">Ø³Ø¨Ù‘Ø­</button>
      <div style="margin-top: 30px;">
        <button onclick="reset()" style="background: #444; color: #fff;">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
      </div>
      <div id="tasbeehHint" style="margin-top: 20px; font-size: 20px; color: var(--gold);"></div>
    </div>
  </section>

  <section id="dhikr">
    <h2 style="text-align: center; color: var(--gold);">Ø£Ø°ÙƒØ§Ø± Ø§Ù„ÙŠÙˆÙ…</h2>
    <div id="dhikrList"></div>
  </section>

  <section id="prayer">
    <div class="card" style="text-align: center;">
      <h3>Ø¹Ø±Ø¶ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</h3>
      <input type="text" id="cityInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© (Ù…Ø«Ù„Ø§Ù‹: London)" />
      <br>
      <button onclick="loadPrayerTimesByCity()">Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯</button>
      <div id="locationName" style="margin-top: 15px; font-weight: bold; color: var(--gold);"></div>
      <div id="prayerTimes" class="prayer-grid"></div>
    </div>
  </section>

  <section id="hadith">
    <h2 style="text-align: center; color: var(--gold);">Ø£Ø­Ø§Ø¯ÙŠØ« Ù†Ø¨ÙˆÙŠØ©</h2>
    <div id="hadithContent"></div>
  </section>

  <audio id="btnSound" src="https://www.soundjay.com/buttons/sounds/button-16.mp3" preload="auto"></audio>
  <audio id="popSound" src="https://www.soundjay.com/buttons/sounds/button-37.mp3" preload="auto"></audio>

  <script>
    // Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø£ØµÙˆØ§Øª
    function playBtn() { document.getElementById("btnSound").play(); }
    function playPop() { 
      const snd = document.getElementById("popSound");
      snd.currentTime = 0;
      snd.play(); 
    }

    // Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
    function openTab(id) {
      document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
      document.getElementById(id).classList.add("active");
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // --- Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ­Ù ---
    let currentSurah = 1;

    async function initQuran() {
      const res = await fetch("https://api.quran.com/api/v4/chapters");
      const data = await res.json();
      let html = "";
      data.chapters.slice(0, 20).forEach(s => {
        html += `<button onclick="loadSurah(${s.id})">${s.name_arabic}</button>`;
      });
      document.getElementById("surahList").innerHTML = html;
      loadSurah(1);
    }

    async function loadSurah(id) {
      currentSurah = id;
      const res = await fetch(`https://api.quran.com/api/v4/quran/verses/uthmani?chapter_number=${id}`);
      const data = await res.json();
      let html = "";
      data.verses.forEach(v => {
        html += `
          <div class="card ayah">
            ${v.text_uthmani} <span style="color:var(--gold); font-size:16px;">(${v.verse_key.split(':')[1]})</span>
            <div style="margin-top:15px">
              <button onclick="loadTafsir('${v.verse_key}')" style="font-size:12px; padding:5px 10px;">Ø§Ù„ØªÙØ³ÙŠØ±</button>
            </div>
            <div id="tafsir-${v.verse_key}" class="tafsir"></div>
          </div>`;
      });
      document.getElementById("ayahs").innerHTML = html;
    }

    async function loadTafsir(key) {
      const el = document.getElementById(`tafsir-${key}`);
      if(el.style.display === 'block') { el.style.display = 'none'; return; }
      el.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...";
      el.style.display = 'block';
      const res = await fetch(`https://api.quran.com/api/v4/tafsirs/16/verses?verse_key=${key}`);
      const data = await res.json();
      el.innerHTML = data.tafsir.text;
    }

    function nextSurah() { if(currentSurah < 114) loadSurah(currentSurah + 1); }
    function prevSurah() { if(currentSurah > 1) loadSurah(currentSurah - 1); }

    // --- Ø§Ù„Ù…Ø³Ø¨Ø­Ø© ---
    let count = 0;
    function inc() {
      count++;
      playPop();
      const el = document.getElementById("count");
      el.innerText = count;
      el.classList.add("bump");
      setTimeout(() => el.classList.remove("bump"), 100);
      
      const hint = document.getElementById("tasbeehHint");
      if(count === 33) hint.innerText = "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ (ØªÙ…Øª 33)";
      if(count === 66) hint.innerText = "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ (ØªÙ…Øª 66)";
      if(count === 99) hint.innerText = "Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø± (ØªÙ…Øª 99)";
      if(count === 100) hint.innerText = "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡";
    }
    function reset() {
      count = 0;
      document.getElementById("count").innerText = 0;
      document.getElementById("tasbeehHint").innerText = "";
    }

    // --- Ø§Ù„Ø£Ø°ÙƒØ§Ø± ---
    const dhikrs = [
      { t: "Ø£ØµØ¨Ø­Ù†Ø§ ÙˆØ£ØµØ¨Ø­ Ø§Ù„Ù…Ù„Ùƒ Ù„Ù„Ù‡ ÙˆØ§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡", r: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©" },
      { t: "ÙŠØ§ Ø­ÙŠ ÙŠØ§ Ù‚ÙŠÙˆÙ… Ø¨Ø±Ø­Ù…ØªÙƒ Ø£Ø³ØªØºÙŠØ«", r: "3 Ù…Ø±Ø§Øª" },
      { t: "Ø±Ø¶ÙŠØª Ø¨Ø§Ù„Ù„Ù‡ Ø±Ø¨Ø§Ù‹ ÙˆØ¨Ø§Ù„Ø¥Ø³Ù„Ø§Ù… Ø¯ÙŠÙ†Ø§Ù‹ ÙˆØ¨Ù…Ø­Ù…Ø¯ ï·º Ù†Ø¨ÙŠØ§Ù‹", r: "3 Ù…Ø±Ø§Øª" },
      { t: "Ø§Ù„Ù„Ù‡Ù… Ø¨Ùƒ Ø£ØµØ¨Ø­Ù†Ø§ ÙˆØ¨Ùƒ Ø£Ù…Ø³ÙŠÙ†Ø§ ÙˆØ¨Ùƒ Ù†Ø­ÙŠØ§ ÙˆØ¨Ùƒ Ù†Ù…ÙˆØª ÙˆØ¥Ù„ÙŠÙƒ Ø§Ù„Ù†Ø´ÙˆØ±", r: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©" }
    ];
    document.getElementById("dhikrList").innerHTML = dhikrs.map(d => `<div class="card">${d.t} <br><small style="color:var(--gold)">${d.r}</small></div>`).join('');

    // --- Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© ---
    async function loadPrayerTimesByCity() {
      const city = document.getElementById("cityInput").value;
      if(!city) { alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"); return; }
      const res = await fetch(`https://api.aladhan.com/v1/timingsByCity?city=${city}&country=&method=4`);
      const d = await res.json();
      if(d.data) {
        const t = d.data.timings;
        document.getElementById("locationName").innerText = `Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© ÙÙŠ ${city}`;
        document.getElementById("prayerTimes").innerHTML = `
          <div class="prayer-item">Ø§Ù„ÙØ¬Ø±<br><b>${t.Fajr}</b></div>
          <div class="prayer-item">Ø§Ù„Ø¸Ù‡Ø±<br><b>${t.Dhuhr}</b></div>
          <div class="prayer-item">Ø§Ù„Ø¹ØµØ±<br><b>${t.Asr}</b></div>
          <div class="prayer-item">Ø§Ù„Ù…ØºØ±Ø¨<br><b>${t.Maghrib}</b></div>
          <div class="prayer-item">Ø§Ù„Ø¹Ø´Ø§Ø¡<br><b>${t.Isha}</b></div>
        `;
      }
    }

    // --- Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ« ---
    async function loadHadiths() {
      const res = await fetch("https://api.hadith.gading.dev/books/muslim?range=1-15");
      const d = await res.json();
      document.getElementById("hadithContent").innerHTML = d.data.hadiths.map(h => `<div class="card">${h.arab}</div>`).join('');
    }

    // ØªØ´ØºÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    initQuran();
    loadHadiths();

  </script>
</body>
</html>
ÙØ¨ÙØ­ÙÙ…Ù’Ø¯ÙÙ‡ÙØŒ Ø¹ÙØ¯ÙØ¯Ù Ø®ÙÙ„Ù’Ù‚ÙÙ‡Ù ÙˆÙØ±ÙØ¶ÙØ§ Ù†ÙÙÙ’Ø³ÙÙ‡Ù ÙˆÙØ²ÙÙ†ÙØ©Ù Ø¹ÙØ±Ù’Ø´ÙÙ‡Ù ÙˆÙÙ…ÙØ¯ÙØ§Ø¯Ù ÙƒÙÙ„ÙÙ…ÙØ§ØªÙÙ‡Ù", ref: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©" }
    ];

    let dhikrHtml = "";
    dhikrs.forEach(d => {
      dhikrHtml += `<div class="card dhikr-item">${d.text}<br><span class="small">(${d.ref})</span></div>`;
    });
    document.getElementById("dhikrList").innerHTML = dhikrHtml;

    // === Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© - Ø¯Ø¹Ù… Ø¹Ø§Ù„Ù…ÙŠ ===
    function loadPrayerTimesByCity() {
      const cityName = document.getElementById("cityInput").value.trim();
      if (!cityName) {
        alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©");
        return;
      }

      const proxy = "https://api.allorigins.win/raw?url=";
      const encodedUrl = encodeURIComponent(`https://api.aladhan.com/v1/timingsByCity?city=${encodeURIComponent(cityName)}&method=5`);
      const fullUrl = proxy + encodedUrl;

      document.getElementById("location").innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...";
      document.getElementById("prayerTimes").innerHTML = "";

      fetch(fullUrl)
        .then(r => {
          if (!r.ok) throw new Error("Ø§Ø³ØªØ¬Ø§Ø¨Ø© ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
          return r.json();
        })
        .then(d => {
          const times = d.data.timings;
          const city = d.data.meta.timezone.city || cityName;
          const date = new Date(d.data.date.gregorian.date);
          const today = date.toLocaleDateString('ar-EG', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          });
          document.getElementById("location").innerText = `Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© ÙÙŠ ${city} - ${today}`;
          
          let html = `<div class="card">`;
          const labels = {
            Fajr: "Ø§Ù„ÙØ¬Ø±",
            Dhuhr: "Ø§Ù„Ø¸Ù‡Ø±",
            Asr: "Ø§Ù„Ø¹ØµØ±",
            Maghrib: "Ø§Ù„Ù…ØºØ±Ø¨",
            Isha: "Ø§Ù„Ø¹Ø´Ø§Ø¡"
          };
          ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'].forEach(name => {
            html += `<div>${labels[name]}: <span class="highlight">${times[name]}</span></div>`;
          });
          html += `</div>`;
          document.getElementById("prayerTimes").innerHTML = html;
        })
        .catch(err => {
          console.error("Error:", err);
          document.getElementById("location").innerText = "ğŸ›‘ Ù„Ù… Ù†Ø¹Ø«Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©. Ø¬Ø±Ù‘Ø¨ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© (Ù…Ø«Ù„: Beirut, Paris).";
          document.getElementById("prayerTimes").innerHTML = "";
        });
    }
  </script>
</body>
</html>ˆÙØ£ÙÙ…Ù’Ø³ÙÙ‰ Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ Ù„ÙÙ„ÙÙ‘Ù‡ÙØŒ ÙˆÙØ§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡ÙØŒ Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡Ù", ref: "Ø§Ù„Ù…Ø³Ø§Ø¡" },
      { text: "Ø±ÙØ¶ÙÙŠØªÙ Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù Ø±ÙØ¨Ù‹Ù‘Ø§ØŒ ÙˆÙØ¨ÙØ§Ù„Ù’Ø¥ÙØ³Ù’Ù„ÙØ§Ù…Ù Ø¯ÙÙŠÙ†Ù‹Ø§ØŒ ÙˆÙØ¨ÙÙ…ÙØ­ÙÙ…ÙÙ‘Ø¯Ù ï·º Ù†ÙØ¨ÙÙŠÙ‹Ù‘Ø§", ref: "ØµØ¨Ø§Ø­Ù‹Ø§ ÙˆÙ…Ø³Ø§Ø¡Ù‹" },
      { text: "Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ¨ÙØ­ÙÙ…Ù’Ø¯ÙÙ‡ÙØŒ Ø¹ÙØ¯ÙØ¯Ù Ø®ÙÙ„Ù’Ù‚ÙÙ‡Ù ÙˆÙØ±ÙØ¶ÙØ§ Ù†ÙÙÙ’Ø³ÙÙ‡Ù ÙˆÙØ²ÙÙ†ÙØ©Ù Ø¹ÙØ±Ù’Ø´ÙÙ‡Ù ÙˆÙÙ…ÙØ¯ÙØ§Ø¯Ù ÙƒÙÙ„ÙÙ…ÙØ§ØªÙÙ‡Ù", ref: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©" }
    ];

    let dhikrHtml = "";
    dhikrs.forEach(d => {
      dhikrHtml += `<div class="card dhikr-item">${d.text}<br><span class="small">(${d.ref})</span></div>`;
    });
    document.getElementById("dhikrList").innerHTML = dhikrHtml;
  </script>
</body>
</html>