<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ØªØ·Ø¨ÙŠÙ‚ Ø±Ø¹Ø¯</title>

<link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">

<style>
body{margin:0;font-family:'Amiri',serif;background:#000;color:#f5f5f5}
header{text-align:center;padding:15px;font-size:24px;color:#d4af37}
nav{display:flex;flex-wrap:wrap;justify-content:center;gap:6px;padding:10px}
button{background:#d4af37;border:none;border-radius:10px;padding:8px 14px;font-weight:bold;cursor:pointer}
section{display:none;padding:15px}
.active{display:block}
.card{background:#111;border-radius:12px;padding:12px;margin:10px 0}
.ayah{line-height:2;font-size:18px}
#compass{width:200px;height:200px;border:4px solid #d4af37;border-radius:50%;margin:20px auto;position:relative}
#needle{width:4px;height:90px;background:#d4af37;position:absolute;bottom:50%;left:50%;transform-origin:bottom}
.counter{font-size:40px;text-align:center}
</style>
</head>

<body>

<header>ğŸŒ¿ ØªØ·Ø¨ÙŠÙ‚ Ø±Ø¹Ø¯</header>

<nav>
<button onclick="openTab('quran')">Ø§Ù„Ù…ØµØ­Ù</button>
<button onclick="openTab('adhkar')">Ø§Ù„Ø£Ø°ÙƒØ§Ø±</button>
<button onclick="openTab('hadith')">Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«</button>
<button onclick="openTab('qibla')">Ø§Ù„Ù‚Ø¨Ù„Ø©</button>
<button onclick="openTab('prayer')">Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©</button>
<button onclick="openTab('tasbeeh')">Ø§Ù„Ù…Ø³Ø¨Ø­Ø©</button>
</nav>

<section id="quran" class="active">
<div id="surahList"></div>
<div id="ayahs"></div>
</section>

<section id="adhkar"></section>
<section id="hadith"></section>

<section id="qibla">
<div class="card" style="text-align:center">
<div id="compass"><div id="needle"></div></div>
<div id="qiblaDeg"></div>
</div>
</section>

<section id="prayer"></section>

<section id="tasbeeh">
<div class="card">
<div class="counter" id="count">0</div>
<div style="text-align:center">
<button onclick="inc()">Ø³Ø¨Ù‘Ø­</button>
<button onclick="reset()">ØªØµÙÙŠØ±</button>
</div>
</div>
</section>

<script>
function openTab(id){
document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

/* ===== Ø§Ù„Ù…ØµØ­Ù ===== */
fetch("https://api.quran.com/api/v4/chapters")
.then(r=>r.json())
.then(d=>{
d.chapters.forEach(s=>{
let b=document.createElement("button");
b.textContent=s.id+" "+s.name_arabic;
b.onclick=()=>loadSurah(s.id);
surahList.appendChild(b);
});
});

function loadSurah(id){
fetch(`https://api.quran.com/api/v4/quran/verses/uthmani?chapter_number=${id}`)
.then(r=>r.json())
.then(d=>{
ayahs.innerHTML=d.verses.map(a=>
`<div class="card ayah">${a.verse_key.replace(id+":","")}. ${a.text_uthmani}</div>`
).join("");
});
}

/* ===== Ø§Ù„Ø£Ø°ÙƒØ§Ø± ===== */
fetch("https://api.npoint.io/9a8e5f9b7c4a9f8e3a4b")
.then(r=>r.json())
.then(d=>{
adhkar.innerHTML="<h3>Ø§Ù„Ø£Ø°ÙƒØ§Ø±</h3>"+d.map(z=>`<div class='card'>${z}</div>`).join("");
});

/* ===== Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ« ===== */
fetch("https://api.hadith.gading.dev/books/muslim?range=1-40")
.then(r=>r.json())
.then(d=>{
hadith.innerHTML="<h3>Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«</h3>"+
d.data.hadiths.map(h=>`<div class='card'>${h.arab}</div>`).join("");
});

/* ===== Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© ===== */
navigator.geolocation.getCurrentPosition(pos=>{
fetch(`https://api.aladhan.com/v1/timings?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&method=2`)
.then(r=>r.json())
.then(d=>{
const t=d.data.timings;
prayer.innerHTML=`
<div class="card">
<p>Ø§Ù„ÙØ¬Ø±: ${t.Fajr}</p>
<p>Ø§Ù„Ø´Ø±ÙˆÙ‚: ${t.Sunrise}</p>
<p>Ø§Ù„Ø¸Ù‡Ø±: ${t.Dhuhr}</p>
<p>Ø§Ù„Ø¹ØµØ±: ${t.Asr}</p>
<p>Ø§Ù„Ù…ØºØ±Ø¨: ${t.Maghrib}</p>
<p>Ø§Ù„Ø¹Ø´Ø§Ø¡: ${t.Isha}</p>
</div>`;
});
});

/* ===== Ø§Ù„Ù‚Ø¨Ù„Ø© ===== */
let bearing=0;
navigator.geolocation.getCurrentPosition(p=>{
const lat=p.coords.latitude, lon=p.coords.longitude;
const Klat=21.4225, Klon=39.8262;
const dLon=(Klon-lon)*Math.PI/180;
const y=Math.sin(dLon)*Math.cos(Klat*Math.PI/180);
const x=Math.cos(lat*Math.PI/180)*Math.sin(Klat*Math.PI/180)-Math.sin(lat*Math.PI/180)*Math.cos(Klat*Math.PI/180)*Math.cos(dLon);
bearing=(Math.atan2(y,x)*180/Math.PI+360)%360;
qiblaDeg.innerText="Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ù‚Ø¨Ù„Ø©: "+Math.round(bearing)+"Â°";
});
window.addEventListener("deviceorientation",e=>{
needle.style.transform=`rotate(${bearing-(e.alpha||0)}deg)`;
});

/* ===== Ø§Ù„Ù…Ø³Ø¨Ø­Ø© ===== */
let c=0;
function inc(){c++;count.innerText=c}
function reset(){c=0;count.innerText=0}
</script>

</body>
</html>City?city=Mecca&country=Saudi Arabia&method=2").then(r=>r.json()).then(d=>{
 const t=d.data.timings;
 prayer.innerHTML=`
 <div class="card" style="text-align:center">
  <p>Ø§Ù„ÙØ¬Ø±: ${t.Fajr}</p>
  <p>Ø§Ù„Ø¸Ù‡Ø±: ${t.Dhuhr}</p>
  <p>Ø§Ù„Ø¹ØµØ±: ${t.Asr}</p>
  <p>Ø§Ù„Ù…ØºØ±Ø¨: ${t.Maghrib}</p>
  <p>Ø§Ù„Ø¹Ø´Ø§Ø¡: ${t.Isha}</p>
 </div>`;
});
</script>
</body>
</html>.cos(dLon);
 bearing=(Math.atan2(y,x)*180/Math.PI+360)%360;
 qiblaDeg.innerText="Ø§Ù„Ø²Ø§ÙˆÙŠØ©: "+Math.round(bearing)+"Â°";
});
window.addEventListener("deviceorientation",e=>{
 let a=e.alpha||0;
 needle.style.transform=`rotate(${bearing-a}deg)`;
});

/* Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© */
navigator.geolocation.getCurrentPosition(pos=>{
 const lat=pos.coords.latitude, lon=pos.coords.longitude;
 fetch(`https://api.aladhan.com/v1/timings?latitude=${lat}&longitude=${lon}&method=2`)
 .then(r=>r.json())
 .then(d=>{
   const t=d.data.timings;
   prayer.innerHTML=`
   <div class="card" style="text-align:center">
     <h3>ğŸ•Œ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©</h3>
     <p>Ø§Ù„ÙØ¬Ø±: ${t.Fajr}</p>
     <p>Ø§Ù„Ø´Ø±ÙˆÙ‚: ${t.Sunrise}</p>
     <p>Ø§Ù„Ø¸Ù‡Ø±: ${t.Dhuhr}</p>
     <p>Ø§Ù„Ø¹ØµØ±: ${t.Asr}</p>
     <p>Ø§Ù„Ù…ØºØ±Ø¨: ${t.Maghrib}</p>
     <p>Ø§Ù„Ø¹Ø´Ø§Ø¡: ${t.Isha}</p>
   </div>`;
 });
});

/* Ù…Ø³Ø¨Ø­Ø© */
let c=0;
function inc(){c++;count.innerText=c;if(soundToggle.checked) clickSound.play()}
function reset(){c=0;count.innerText=0}
</script>
</body>
</html>