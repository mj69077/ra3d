<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ØªØ·Ø¨ÙŠÙ‚ Ø±Ø¹Ø¯</title>
  <link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      background: #000;
      color: #f5f5f5;
      font-family: 'Amiri', serif;
      overflow-x: hidden;
    }
    header {
      text-align: center;
      color: #d4af37;
      font-size: 26px;
      padding: 14px;
      background: #111;
    }

    .hamburger {
      display: none;
      flex-direction: column;
      cursor: pointer;
      padding: 10px;
      background: #111;
    }
    .hamburger span {
      width: 25px;
      height: 3px;
      background: #d4af37;
      margin: 3px 0;
      transition: 0.3s;
    }

    nav {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: center;
      padding: 10px;
      background: #112;
    }

    button {
      background: #d4af37;
      border: none;
      border-radius: 10px;
      padding: 8px 12px;
      font-weight: bold;
      cursor: pointer;
      font-size: 16px;
      transition: transform 0.2s, opacity 0.2s;
    }
    button:hover {
      transform: scale(1.03);
      opacity: 0.9;
    }

    section {
      display: none;
      padding: 15px;
      animation: fadeIn 0.5s ease-in-out;
    }
    .active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .card {
      background: #1a1a1a;
      border-radius: 12px;
      padding: 14px;
      margin: 12px 0;
      border: 1px solid #333;
      transition: all 0.3s ease;
    }
    .card:hover {
      border-color: #d4af37;
    }
    .ayah {
      line-height: 2.2;
      font-size: 20px;
    }
    .counter {
      text-align: center;
      font-size: 50px;
      margin: 20px 0;
      color: #d4af37;
      transition: transform 0.3s;
    }
    .highlight {
      color: #d4af37;
      font-weight: bold;
    }
    .small {
      font-size: 14px;
      color: #aaa;
    }
    .tafsir {
      background: #222;
      border-left: 3px solid #d4af37;
      padding: 10px;
      margin-top: 8px;
      font-size: 16px;
      display: none;
      animation: slideDown 0.4s ease;
    }
    @keyframes slideDown {
      from { max-height: 0; opacity: 0; padding: 0 10px; }
      to { max-height: 200px; opacity: 1; padding: 10px; }
    }
    .dhikr-item {
      padding: 12px 0;
      border-bottom: 1px solid #333;
    }
    .audio-btn, .copy-btn {
      background: #444;
      color: #fff;
      font-size: 14px;
      padding: 4px 8px;
      margin: 0 4px;
      border-radius: 5px;
    }

    #location {
      text-align: center;
      color: #d4af37;
      margin: 10px 0;
      font-weight: bold;
    }

    @media (max-width: 768px) {
      .hamburger {
        display: flex;
      }
      nav {
        display: none;
        flex-direction: column;
        align-items: center;
        position: absolute;
        top: 60px;
        left: 0;
        right: 0;
        background: #111;
        z-index: 100;
        padding: 10px;
      }
      nav.active {
        display: flex;
      }
      nav button {
        width: 90%;
        margin: 5px 0;
        justify-content: center;
      }
    }

    select {
      background: #222;
      color: #f5f5f5;
      border: 1px solid #444;
      border-radius: 8px;
      padding: 8px;
      font-size: 16px;
      direction: rtl;
      width: 80%;
      margin: 5px 0;
    }
  </style>
</head>

<body>
  <header>ğŸŒ¿ ØªØ·Ø¨ÙŠÙ‚ Ø±Ø¹Ø¯</header>

  <div class="hamburger" onclick="toggleMenu()">
    <span></span>
    <span></span>
    <span></span>
  </div>

  <nav id="mainNav">
    <button onclick="openTab('quran')">Ø§Ù„Ù…ØµØ­Ù</button>
    <button onclick="openTab('tafsir')">Ø§Ù„ØªÙØ³ÙŠØ±</button>
    <button onclick="openTab('hadith')">Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«</button>
    <button onclick="openTab('tasbeeh')">Ø§Ù„Ù…Ø³Ø¨Ø­Ø©</button>
    <button onclick="openTab('prayer')">Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©</button>
    <button onclick="openTab('dhikr')">Ø§Ù„Ø£Ø°ÙƒØ§Ø±</button>
  </nav>

  <!-- Ø§Ù„Ù…ØµØ­Ù -->
  <section id="quran" class="active">
    <div style="text-align: center; margin-bottom: 10px;">
      <button onclick="prevSurah()" class="small">Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</button>
      <button onclick="nextSurah()" class="small">Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©</button>
    </div>
    <div id="surahList"></div>
    <div id="ayahs"></div>
  </section>

  <!-- Ø§Ù„ØªÙØ³ÙŠØ± -->
  <section id="tafsir">
    <h3>Ø§Ù„ØªÙØ³ÙŠØ± ÙŠØ¸Ù‡Ø± Ø£Ø³ÙÙ„ Ø§Ù„Ø¢ÙŠØ© ÙÙŠ Ù‚Ø³Ù… "Ø§Ù„Ù…ØµØ­Ù"</h3>
    <p class="small">Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠ Ø¢ÙŠØ© Ù„Ø±Ø¤ÙŠØ© ØªÙØ³ÙŠØ±Ù‡Ø§ Ø§Ù„Ù…Ø®ØªØµØ±.</p>
  </section>

  <!-- Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ« -->
  <section id="hadith">
    <h3>ØµØ­ÙŠØ­ Ù…Ø³Ù„Ù… (1-40)</h3>
    <div id="hadithContent"></div>
  </section>

  <!-- Ø§Ù„Ù…Ø³Ø¨Ø­Ø© -->
  <section id="tasbeeh">
    <div class="card">
      <div class="counter" id="count">0</div>
      <div style="text-align: center;">
        <button onclick="inc()">Ø³Ø¨Ù‘Ø­</button>
        <button onclick="reset()">ØªØµÙÙŠØ±</button>
      </div>
      <div id="tasbeehHint" style="text-align: center; margin-top: 10px; color: #d4af37;"></div>
    </div>
  </section>

  <!-- Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© -->
  <section id="prayer">
    <h3>Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©</h3>
    <div style="text-align: center; margin: 15px 0;">
      <select id="countrySelect" onchange="loadCities()">
        <option value="">Ø§Ø®ØªØ± Ø¨Ù„Ø¯Ùƒ</option>
      </select>
      <br>
      <select id="citySelect" onchange="loadPrayerTimes()" disabled>
        <option value="">Ø§Ø®ØªØ± Ù…Ø¯ÙŠÙ†ØªÙƒ</option>
      </select>
    </div>
    <div id="location"></div>
    <div id="prayerTimes"></div>
  </section>

  <!-- Ø§Ù„Ø£Ø°ÙƒØ§Ø± -->
  <section id="dhikr">
    <h3>Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­ ÙˆØ§Ù„Ù…Ø³Ø§Ø¡</h3>
    <div id="dhikrList"></div>
  </section>

  <script>
    function openTab(id) {
      document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
      document.getElementById(id).classList.add("active");
      if (window.innerWidth <= 768) {
        document.getElementById("mainNav").classList.remove("active");
      }
    }

    function toggleMenu() {
      document.getElementById("mainNav").classList.toggle("active");
    }

    let currentSurahId = 1;

    // ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯ÙˆÙ„ Ù…Ù† aladhan API
    fetch("https://api.aladhan.com/v1/countries")
      .then(r => r.json())
      .then(d => {
        const sel = document.getElementById("countrySelect");
        d.data.forEach(country => {
          const opt = document.createElement("option");
          opt.value = country.id;
          opt.text = country.name;
          sel.appendChild(opt);
        });
      });

    function loadCities() {
      const countryId = document.getElementById("countrySelect").value;
      const citySel = document.getElementById("citySelect");
      citySel.innerHTML = '<option value="">Ø§Ø®ØªØ± Ù…Ø¯ÙŠÙ†ØªÙƒ</option>';
      if (!countryId) {
        citySel.disabled = true;
        return;
      }
      citySel.disabled = false;
      fetch(`https://api.aladhan.com/v1/cities/${countryId}`)
        .then(r => r.json())
        .then(d => {
          if (d.data && d.data.length > 0) {
            d.data.forEach(city => {
              const opt = document.createElement("option");
              opt.value = city.id;
              opt.text = city.name;
              citySel.appendChild(opt);
            });
          } else {
            citySel.innerHTML = '<option value="">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¯Ù† Ù…ØªØ§Ø­Ø©</option>';
          }
        })
        .catch(() => {
          citySel.innerHTML = '<option value="">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¯Ù†</option>';
        });
    }

    function loadPrayerTimes() {
      const cityId = document.getElementById("citySelect").value;
      if (!cityId) {
        document.getElementById("location").innerText = "ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¯ÙŠÙ†ØªÙƒ.";
        document.getElementById("prayerTimes").innerHTML = "";
        return;
      }

      fetch(`https://api.aladhan.com/v1/timingsByCity?cityId=${cityId}&method=5`)
        .then(r => r.json())
        .then(d => {
          const times = d.data.timings;
          const meta = d.data.meta;
          const date = new Date(d.data.date.gregorian.date);
          const today = date.toLocaleDateString('ar-EG', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          });
          document.getElementById("location").innerText = `Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© ÙÙŠ ${meta.timezone.city} - ${today}`;
          let html = `<div class="card">`;
          const labels = {
            Fajr: "Ø§Ù„ÙØ¬Ø±",
            Dhuhr: "Ø§Ù„Ø¸Ù‡Ø±",
            Asr: "Ø§Ù„Ø¹ØµØ±",
            Maghrib: "Ø§Ù„Ù…ØºØ±Ø¨",
            Isha: "Ø§Ù„Ø¹Ø´Ø§Ø¡"
          };
          ['Fajr', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'].forEach(name => {
            html += `<div>${labels[name]}: <span class="highlight">${times[name]}</span></div>`;
          });
          html += `</div>`;
          document.getElementById("prayerTimes").innerHTML = html;
        })
        .catch(err => {
          console.error(err);
          document.getElementById("location").innerText = "ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„.";
          document.getElementById("prayerTimes").innerHTML = "";
        });
    }

    // === Ø§Ù„Ù…ØµØ­Ù ===
    fetch("https://api.quran.com/api/v4/chapters")
      .then(r => r.json())
      .then(d => {
        let list = "";
        d.chapters.forEach(s => {
          list += `<button onclick="loadSurah(${s.id})">${s.id}. ${s.name_arabic}</button> `;
        });
        document.getElementById("surahList").innerHTML = list;
        loadSurah(1); // ÙŠØ¨Ø¯Ø£ Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ù…Ù† Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø©
      });

    function loadSurah(id) {
      currentSurahId = id;
      document.getElementById("surahList").innerHTML = "";
      fetch(`https://api.quran.com/api/v4/quran/verses/uthmani?chapter_number=${id}`)
        .then(r => r.json())
        .then(d => {
          let html = "";
          d.verses.forEach(a => {
            const verseKey = a.verse_key;
            html += `
              <div class="card ayah">
                <span class="highlight">${a.verse_key.split(":")[1]}</span> - ${a.text_uthmani}
                <div style="margin-top: 8px;">
                  <button class="audio-btn" onclick="window.open('https://quran.com/${verseKey}', '_blank')">Ø³Ù…Ø§Ø¹</button>
                  <button class="copy-btn" onclick="copyVerse('${a.text_uthmani}')">Ù†Ø³Ø®</button>
                  <button class="copy-btn" onclick="loadTafsir('${verseKey}')">ØªÙØ³ÙŠØ±</button>
                </div>
                <div id="tafsir-${verseKey}" class="tafsir"></div>
              </div>`;
          });
          document.getElementById("ayahs").innerHTML = html;
        });
    }

    function loadTafsir(verseKey) {
      const tafsirEl = document.getElementById(`tafsir-${verseKey}`);
      if (tafsirEl.style.display === 'block') {
        tafsirEl.style.display = 'none';
        return;
      }
      if (tafsirEl.innerHTML) {
        tafsirEl.style.display = 'block';
        return;
      }
      fetch(`https://api.quran.com/api/v4/tafsirs/16/verses?verse_key=${verseKey}`)
        .then(r => r.json())
        .then(d => {
          if (d.tafsir?.text) {
            tafsirEl.innerHTML = d.tafsir.text;
            tafsirEl.style.display = 'block';
          } else {
            tafsirEl.innerHTML = "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªÙØ³ÙŠØ± Ù…ØªØ§Ø­.";
            tafsirEl.style.display = 'block';
          }
        })
        .catch(() => {
          tafsirEl.innerHTML = "ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙØ³ÙŠØ±.";
          tafsirEl.style.display = 'block';
        });
    }

    function copyVerse(text) {
      if (navigator.clipboard) {
        navigator.clipboard.writeText(text).then(() => {
          alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¢ÙŠØ©!");
        });
      } else {
        alert("Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ù†Ø³Ø® Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ.");
      }
    }

    function nextSurah() {
      if (currentSurahId < 114) loadSurah(currentSurahId + 1);
    }
    function prevSurah() {
      if (currentSurahId > 1) loadSurah(currentSurahId - 1);
    }

    // === Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ« ===
    fetch("https://api.hadith.gading.dev/books/muslim?range=1-40")
      .then(r => r.json())
      .then(d => {
        let html = "";
        d.data?.hadiths?.forEach(h => {
          html += `<div class="card">${h.arab}</div>`;
        });
        document.getElementById("hadithContent").innerHTML = html || "<div class='card'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø­Ø§Ø¯ÙŠØ« Ù…ØªØ§Ø­Ø©.</div>";
      })
      .catch(() => {
        document.getElementById("hadithContent").innerHTML = "<div class='card'>ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«.</div>";
      });

    // === Ø§Ù„Ù…Ø³Ø¨Ø­Ø© ===
    let counter = 0;
    function inc() {
      counter++;
      const el = document.getElementById("count");
      el.innerText = counter;
      el.style.transform = "scale(1.1)";
      setTimeout(() => el.style.transform = "scale(1)", 200);

      const hintEl = document.getElementById("tasbeehHint");
      hintEl.innerText = "";
      if (counter === 33) hintEl.innerText = "Ø£ÙƒÙ…Ù„Øª Ø«ÙÙ„Ø« Ø§Ù„Ù…Ø³Ø¨Ø­Ø©! ğŸŒŸ";
      else if (counter === 66) hintEl.innerText = "Ø£ÙƒÙ…Ù„Øª Ø«ÙÙ„Ø«ÙŠÙ‡Ø§! ğŸŒ™";
      else if (counter === 100) hintEl.innerText = "Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ù…Ø³Ø¨Ø­Ø©! ğŸŒº";
    }
    function reset() {
      counter = 0;
      document.getElementById("count").innerText = counter;
      document.getElementById("tasbeehHint").innerText = "";
    }

    // === Ø§Ù„Ø£Ø°ÙƒØ§Ø± ===
    const dhikrs = [
      { text: "Ø£ÙØµÙ’Ø¨ÙØ­Ù’Ù†ÙØ§ ÙˆÙØ£ÙØµÙ’Ø¨ÙØ­Ù Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ Ù„ÙÙ„ÙÙ‘Ù‡ÙØŒ ÙˆÙØ§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡ÙØŒ Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡Ù", ref: "Ø§Ù„ØµØ¨Ø§Ø­" },
      { text: "Ø£ÙÙ…Ù’Ø³ÙÙŠÙ’Ù†ÙØ§ ÙˆÙØ£ÙÙ…Ù’Ø³ÙÙ‰ Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ Ù„ÙÙ„ÙÙ‘Ù‡ÙØŒ ÙˆÙØ§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡ÙØŒ Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡Ù", ref: "Ø§Ù„Ù…Ø³Ø§Ø¡" },
      { text: "Ø±ÙØ¶ÙÙŠØªÙ Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù Ø±ÙØ¨Ù‹Ù‘Ø§ØŒ ÙˆÙØ¨ÙØ§Ù„Ù’Ø¥ÙØ³Ù’Ù„ÙØ§Ù…Ù Ø¯ÙÙŠÙ†Ù‹Ø§ØŒ ÙˆÙØ¨ÙÙ…ÙØ­ÙÙ…ÙÙ‘Ø¯Ù ï·º Ù†ÙØ¨ÙÙŠÙ‹Ù‘Ø§", ref: "ØµØ¨Ø§Ø­Ù‹Ø§ ÙˆÙ…Ø³Ø§Ø¡Ù‹" },
      { text: "Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ¨ÙØ­ÙÙ…Ù’Ø¯ÙÙ‡ÙØŒ Ø¹ÙØ¯ÙØ¯Ù Ø®ÙÙ„Ù’Ù‚ÙÙ‡Ù ÙˆÙØ±ÙØ¶ÙØ§ Ù†ÙÙÙ’Ø³ÙÙ‡Ù ÙˆÙØ²ÙÙ†ÙØ©Ù Ø¹ÙØ±Ù’Ø´ÙÙ‡Ù ÙˆÙÙ…ÙØ¯ÙØ§Ø¯Ù ÙƒÙÙ„ÙÙ…ÙØ§ØªÙÙ‡Ù", ref: "Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©" }
    ];

    let dhikrHtml = "";
    dhikrs.forEach(d => {
      dhikrHtml += `<div class="card dhikr-item">${d.text}<br><span class="small">(${d.ref})</span></div>`;
    });
    document.getElementById("dhikrList").innerHTML = dhikrHtml;
  </script>
</body>
</html>